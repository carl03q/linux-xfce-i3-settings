function BundleAccessor(a){this._init(a)}BundleAccessor.inherits(ServerCommunication);BundleAccessor.method("_init",function(b,a){this.uber("_init",b);this.SYNCED_COOKIE=a;this.PREVIOUS_PULL_RESPONSE="prev-resp-{0}".format(a);this.pullResponse=undefined;this.userId=undefined});BundleAccessor.method("_push",function(e,d,c,g,f,b,a){var g=collect({json:c},g);this._accessWebsite("push",e,d,g,f,b,a)});BundleAccessor.method("_pull",function(d,c,e,b,a){if(this.userId!=d||!this.pullResponse){this.userId=d;this._accessWebsite("pull",d,c,{},function(g,f){g.pullResponse=f;e?e(g,g.pullResponse,true):false},b,function(i,f){var g=JSON.stringify(f.data);var h=g!==i.getPullResponse();i.setPullResponse(g);a?a(i,f,h):false})}else{e?e(this,this.pullResponse,false):false;a?a(this,this.pullResponse,false):false}});BundleAccessor.method("_remove",function(d,c,f,e,b,a){this._accessWebsite("delete",d,c,f,e,b,a)});BundleAccessor.method("setPullResponse",function(a){DB.insertLocalStorage(this.PREVIOUS_PULL_RESPONSE,a)});BundleAccessor.method("getPullResponse",function(){return DB.readLocalStorage(this.PREVIOUS_PULL_RESPONSE)});BundleAccessor.method("addBundle",function(a,c){var b=this.getBundleList();if(Object.keys(b).length<Account.bundleLimit()){b[a]=c||true;DB.insertLocalStorage(this.SYNCED_COOKIE,JSON.stringify(b));return true}else{return false}});BundleAccessor.method("resetBundleList",function(a){DB.insertLocalStorage(this.SYNCED_COOKIE,a||"{}");this.pullResponse=undefined;if(!a){DB.eraseLocalStorage(this.PREVIOUS_PULL_RESPONSE);this.userId=undefined}});BundleAccessor.method("getBundleList",function(){var a=DB.readLocalStorage(this.SYNCED_COOKIE);return a?JSON.parse(a):{}});BundleAccessor.method("getBundle",function(a){var b=this.getBundleList();return b[a]});BundleAccessor.method("isSynced",function(a){var b=this.getBundleList();return a in b&&!!b[a]});BundleAccessor.method("removeBundle",function(a){var b=this.getBundleList();delete (b[a]);this.resetBundleList(JSON.stringify(b))});BundleAccessor.method("length",function(){var a=this.getBundleList();return Object.keys(a).length});