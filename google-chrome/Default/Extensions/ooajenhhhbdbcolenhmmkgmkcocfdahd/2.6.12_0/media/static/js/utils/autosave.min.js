function AutosaveHandler(){this.AutosaveKey="tb-autosave";this.TargetKey="tb-target"}AutosaveHandler.method("addTarget",function(b){var a=JSON.parse(DB.readLocalStorage(this.TargetKey)||"{}");a[b]=true;DB.insertLocalStorage(this.TargetKey,JSON.stringify(a))});AutosaveHandler.method("removeTarget",function(b){var a=JSON.parse(DB.readLocalStorage(this.TargetKey)||"{}");delete (a[b]);DB.insertLocalStorage(this.TargetKey,JSON.stringify(a))});AutosaveHandler.method("isTarget",function(b){var a=JSON.parse(DB.readLocalStorage(this.TargetKey)||"{}");return !!a[b]});AutosaveHandler.method("clearBundles",function(){DB.createCookie(this.AutosaveKey,"{}",365)});AutosaveHandler.method("getWindowId",function(b){var d=this.getBundleNameLookup();var c=Object.keys(d);for(var a=0;a<c.length;a++){if(d[c[a]]==b){return parseInt(c[a])}}return -1});AutosaveHandler.method("addBundle",function(a,b){var c=this.getBundleNameLookup();c[a]=b;DB.createCookie(this.AutosaveKey,JSON.stringify(c),365)});AutosaveHandler.method("removeBundle",function(a){var c=this.getBundleNameLookup();var b=Object.keys(c);b.map(function(d){if(a==c[parseInt(d)]){delete (c[parseInt(d)])}});DB.createCookie(this.AutosaveKey,JSON.stringify(c),365)});AutosaveHandler.method("removeWindow",function(a){var b=this.getBundleNameLookup();delete (b[parseInt(a)]);DB.createCookie(this.AutosaveKey,JSON.stringify(b),365)});AutosaveHandler.method("getBundleName",function(a){var b=this.getBundleNameLookup();return b[parseInt(a)]});AutosaveHandler.method("getBundleNames",function(){var a=this.getBundleNameLookup();return Object.keys(a).map(function(b){return a[b]})});AutosaveHandler.method("getBundleNameLookup",function(){return JSON.parse(DB.readCookie(this.AutosaveKey)||"{}")});AutosaveHandler.method("assignEvents",function(){chrome.windows.onRemoved.addListener(function(a){var b=this.getBundleNameLookup();if(b[parseInt(a)]){delete (b[parseInt(a)]);DB.createCookie(this.AutosaveKey,JSON.stringify(b),365)}})});var Autosave=new AutosaveHandler();